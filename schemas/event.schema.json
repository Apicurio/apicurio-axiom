{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/EricWittmann/apicurio-axiom/schemas/event.schema.json",
  "title": "Event",
  "description": "GitHub event data processed by the bot",
  "type": "object",
  "required": [
    "id",
    "type",
    "repository",
    "repositoryOwner",
    "repositoryName",
    "actor",
    "createdAt"
  ],
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique identifier for the event"
    },
    "type": {
      "type": "string",
      "description": "Event type (e.g., 'issue.opened', 'pull_request.created')"
    },
    "repository": {
      "type": "string",
      "description": "Full repository name (owner/repo)"
    },
    "repositoryOwner": {
      "type": "string",
      "description": "Repository owner username"
    },
    "repositoryName": {
      "type": "string",
      "description": "Repository name"
    },
    "actor": {
      "type": "string",
      "description": "Username of the person who triggered the event"
    },
    "createdAt": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp when the event was created"
    },
    "issue": {
      "$ref": "#/definitions/IssueEvent",
      "description": "Issue data if this is an issue-related event"
    },
    "pullRequest": {
      "$ref": "#/definitions/PullRequestEvent",
      "description": "Pull request data if this is a PR-related event"
    },
    "discussion": {
      "$ref": "#/definitions/DiscussionEvent",
      "description": "Discussion data if this is a discussion-related event"
    },
    "comment": {
      "$ref": "#/definitions/CommentEvent",
      "description": "Comment data if this is a comment-related event"
    },
    "label": {
      "type": "string",
      "description": "Label name if this is a label-related event"
    },
    "payload": {
      "$ref": "#/definitions/GitHubEventPayload",
      "description": "Raw GitHub event payload"
    },
    "rawEvent": {
      "$ref": "#/definitions/GitHubEvent",
      "description": "Raw GitHub event object"
    }
  },
  "additionalProperties": false,
  "definitions": {
    "IssueEvent": {
      "type": "object",
      "description": "GitHub issue event data",
      "required": [
        "number",
        "title",
        "state",
        "labels",
        "author",
        "url"
      ],
      "properties": {
        "number": {
          "type": "integer",
          "description": "Issue number",
          "minimum": 1
        },
        "title": {
          "type": "string",
          "description": "Issue title"
        },
        "state": {
          "type": "string",
          "description": "Issue state (open, closed)",
          "enum": ["open", "closed"]
        },
        "labels": {
          "type": "array",
          "description": "Array of label names",
          "items": {
            "type": "string"
          }
        },
        "author": {
          "type": "string",
          "description": "Username of issue author"
        },
        "url": {
          "type": "string",
          "format": "uri",
          "description": "URL to the issue"
        }
      },
      "additionalProperties": false
    },
    "PullRequestEvent": {
      "type": "object",
      "description": "GitHub pull request event data",
      "required": [
        "number",
        "title",
        "state",
        "labels",
        "author",
        "url",
        "draft"
      ],
      "properties": {
        "number": {
          "type": "integer",
          "description": "Pull request number",
          "minimum": 1
        },
        "title": {
          "type": "string",
          "description": "Pull request title"
        },
        "state": {
          "type": "string",
          "description": "Pull request state (open, closed)",
          "enum": ["open", "closed"]
        },
        "labels": {
          "type": "array",
          "description": "Array of label names",
          "items": {
            "type": "string"
          }
        },
        "author": {
          "type": "string",
          "description": "Username of pull request author"
        },
        "url": {
          "type": "string",
          "format": "uri",
          "description": "URL to the pull request"
        },
        "draft": {
          "type": "boolean",
          "description": "Whether the pull request is a draft"
        }
      },
      "additionalProperties": false
    },
    "CommentEvent": {
      "type": "object",
      "description": "GitHub comment event data",
      "required": [
        "author",
        "url",
        "body"
      ],
      "properties": {
        "author": {
          "type": "string",
          "description": "Username of comment author"
        },
        "url": {
          "type": "string",
          "format": "uri",
          "description": "URL to the comment"
        },
        "body": {
          "type": "string",
          "description": "Comment text content"
        }
      },
      "additionalProperties": false
    },
    "DiscussionEvent": {
      "type": "object",
      "description": "GitHub discussion event data",
      "required": [
        "number",
        "title",
        "category",
        "author",
        "url"
      ],
      "properties": {
        "number": {
          "type": "integer",
          "description": "Discussion number",
          "minimum": 1
        },
        "title": {
          "type": "string",
          "description": "Discussion title"
        },
        "category": {
          "type": "string",
          "description": "Discussion category"
        },
        "author": {
          "type": "string",
          "description": "Username of discussion author"
        },
        "url": {
          "type": "string",
          "format": "uri",
          "description": "URL to the discussion"
        }
      },
      "additionalProperties": false
    },
    "GitHubUser": {
      "type": "object",
      "description": "GitHub user object",
      "required": ["login"],
      "properties": {
        "login": {
          "type": "string",
          "description": "GitHub username"
        }
      },
      "additionalProperties": true
    },
    "GitHubLabel": {
      "type": "object",
      "description": "GitHub label object",
      "required": ["name"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Label name"
        }
      },
      "additionalProperties": true
    },
    "GitHubIssue": {
      "type": "object",
      "description": "GitHub issue object from API",
      "required": [
        "number",
        "title",
        "state",
        "html_url"
      ],
      "properties": {
        "number": {
          "type": "integer",
          "description": "Issue number",
          "minimum": 1
        },
        "title": {
          "type": "string",
          "description": "Issue title"
        },
        "state": {
          "type": "string",
          "description": "Issue state",
          "enum": ["open", "closed"]
        },
        "labels": {
          "type": "array",
          "description": "Array of label objects",
          "items": {
            "$ref": "#/definitions/GitHubLabel"
          }
        },
        "user": {
          "$ref": "#/definitions/GitHubUser",
          "description": "Issue author"
        },
        "html_url": {
          "type": "string",
          "format": "uri",
          "description": "URL to the issue"
        }
      },
      "additionalProperties": true
    },
    "GitHubPullRequest": {
      "type": "object",
      "description": "GitHub pull request object from API",
      "required": [
        "number",
        "title",
        "state",
        "html_url",
        "draft"
      ],
      "properties": {
        "number": {
          "type": "integer",
          "description": "Pull request number",
          "minimum": 1
        },
        "title": {
          "type": "string",
          "description": "Pull request title"
        },
        "state": {
          "type": "string",
          "description": "Pull request state",
          "enum": ["open", "closed"]
        },
        "labels": {
          "type": "array",
          "description": "Array of label objects",
          "items": {
            "$ref": "#/definitions/GitHubLabel"
          }
        },
        "user": {
          "$ref": "#/definitions/GitHubUser",
          "description": "Pull request author"
        },
        "html_url": {
          "type": "string",
          "format": "uri",
          "description": "URL to the pull request"
        },
        "draft": {
          "type": "boolean",
          "description": "Whether the pull request is a draft"
        }
      },
      "additionalProperties": true
    },
    "GitHubComment": {
      "type": "object",
      "description": "GitHub comment object from API",
      "required": [
        "body",
        "html_url"
      ],
      "properties": {
        "body": {
          "type": "string",
          "description": "Comment text"
        },
        "user": {
          "$ref": "#/definitions/GitHubUser",
          "description": "Comment author"
        },
        "html_url": {
          "type": "string",
          "format": "uri",
          "description": "URL to the comment"
        }
      },
      "additionalProperties": true
    },
    "GitHubEventPayload": {
      "type": "object",
      "description": "GitHub event payload object",
      "properties": {
        "action": {
          "type": "string",
          "description": "Event action (e.g., 'opened', 'closed', 'labeled')"
        },
        "issue": {
          "$ref": "#/definitions/GitHubIssue",
          "description": "Issue object if present"
        },
        "pull_request": {
          "$ref": "#/definitions/GitHubPullRequest",
          "description": "Pull request object if present"
        },
        "comment": {
          "$ref": "#/definitions/GitHubComment",
          "description": "Comment object if present"
        },
        "label": {
          "$ref": "#/definitions/GitHubLabel",
          "description": "Label object if present"
        }
      },
      "additionalProperties": true
    },
    "GitHubEvent": {
      "type": "object",
      "description": "Raw GitHub event object",
      "required": [
        "id",
        "type",
        "actor",
        "created_at",
        "payload"
      ],
      "properties": {
        "id": {
          "type": "string",
          "description": "Event ID"
        },
        "type": {
          "type": "string",
          "description": "Event type"
        },
        "actor": {
          "$ref": "#/definitions/GitHubUser",
          "description": "User who triggered the event"
        },
        "created_at": {
          "type": "string",
          "format": "date-time",
          "description": "Event creation timestamp"
        },
        "payload": {
          "$ref": "#/definitions/GitHubEventPayload",
          "description": "Event payload"
        }
      },
      "additionalProperties": true
    }
  }
}
