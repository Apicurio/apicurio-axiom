{
  "project": {
    "name": "apicurio-axiom",
    "version": "1.0.0",
    "description": "A locally-running GitHub automation system that monitors GitHub events and triggers custom actions based on configurable rules. Features AI Agent integration via Google Cloud Vertex AI for intelligent automation.",
    "type": "GitHub Automation System with AI Agent Integration",
    "license": "Apache-2.0",
    "author": "Apicurio Community",
    "generated": "2026-02-04"
  },
  "entryPoints": {
    "main": "src/index.ts",
    "compiled": "dist/index.js",
    "startScript": "start.sh"
  },
  "structure": {
    "sourceFiles": {
      "typescript": 41,
      "actions": 4,
      "prompts": 5,
      "schemas": 5,
      "documentation": 6
    },
    "directories": {
      "src": {
        "path": "src/",
        "description": "TypeScript source code",
        "subdirectories": [
          "actions",
          "agent",
          "config",
          "events",
          "github",
          "logging",
          "queue",
          "state",
          "types",
          "validation"
        ]
      },
      "prompts": {
        "path": "prompts/",
        "description": "AI agent task prompts (Handlebars templates)"
      },
      "actions": {
        "path": "actions/",
        "description": "Custom JavaScript actions"
      },
      "schemas": {
        "path": "schemas/",
        "description": "JSON schemas and event examples"
      },
      "docs": {
        "path": "docs/",
        "description": "Documentation files"
      },
      "dist": {
        "path": "dist/",
        "description": "Compiled JavaScript output"
      },
      "data": {
        "path": "data/",
        "description": "Runtime data (state, work, logs, events)",
        "subdirectories": [
          "state",
          "work",
          "logs",
          "events"
        ]
      }
    }
  },
  "coreModules": [
    {
      "name": "Configuration System",
      "path": "src/config/",
      "files": [
        "config-loader.ts",
        "validators.ts"
      ],
      "purpose": "Load and validate YAML configuration with environment variable substitution"
    },
    {
      "name": "GitHub Integration",
      "path": "src/github/",
      "files": [
        "client.ts",
        "poller.ts",
        "repository-manager.ts",
        "repository.ts",
        "fork-validator.ts",
        "current-user.ts"
      ],
      "purpose": "GitHub API client, event polling, repository management, and user authentication"
    },
    {
      "name": "Event Processing",
      "path": "src/events/",
      "files": [
        "event-processor.ts"
      ],
      "purpose": "Match GitHub events against configured rules and trigger actions"
    },
    {
      "name": "Action Execution",
      "path": "src/actions/",
      "files": [
        "action-executor.ts",
        "executors/action-executor-interface.ts",
        "executors/shell-action-executor.ts",
        "executors/javascript-action-executor.ts",
        "executors/ai-agent-action-executor.ts"
      ],
      "purpose": "Execute actions with logging, environment setup, and error handling"
    },
    {
      "name": "AI Agent Runtime",
      "path": "src/agent/",
      "files": [
        "runtime.ts",
        "conversation.ts",
        "vertex-client.ts",
        "safety.ts",
        "tools/registry.ts",
        "tools/builder.ts",
        "tools/composite.ts",
        "tools/github.ts",
        "tools/repository.ts",
        "prompts/registry.ts"
      ],
      "purpose": "Claude AI integration with custom tool system for intelligent automation"
    },
    {
      "name": "Job Queue",
      "path": "src/queue/",
      "files": [
        "job-queue.ts",
        "work-directory-manager.ts"
      ],
      "purpose": "Persistent job queue with concurrency control and work directory management"
    },
    {
      "name": "State Management",
      "path": "src/state/",
      "files": [
        "state-manager.ts"
      ],
      "purpose": "SQLite-based event tracking and job queue persistence"
    },
    {
      "name": "Logging System",
      "path": "src/logging/",
      "files": [
        "logger.ts",
        "log-manager.ts"
      ],
      "purpose": "Structured JSON logging with correlation IDs and automatic cleanup"
    },
    {
      "name": "Validation",
      "path": "src/validation/",
      "files": [
        "event-validator.ts"
      ],
      "purpose": "Event schema validation using JSON schemas"
    },
    {
      "name": "Type Definitions",
      "path": "src/types/",
      "files": [
        "config.ts",
        "events.ts",
        "actions.ts",
        "agent.ts",
        "github.ts",
        "github-user.ts",
        "queue.ts",
        "work-directory.ts",
        "filters.ts"
      ],
      "purpose": "TypeScript type definitions for all core data structures"
    }
  ],
  "prompts": [
    {
      "name": "base",
      "file": "prompts/base.hbs",
      "description": "Base prompt template for all AI agents"
    },
    {
      "name": "label-issue",
      "file": "prompts/label-issue.hbs",
      "description": "Automatic issue labeling based on content analysis"
    },
    {
      "name": "analyze-issue",
      "file": "prompts/analyze-issue.hbs",
      "description": "In-depth issue analysis with repository context"
    },
    {
      "name": "discussion",
      "file": "prompts/discussion.hbs",
      "description": "Participate in GitHub discussions"
    },
    {
      "name": "test-comment",
      "file": "prompts/test-comment.hbs",
      "description": "Simple test comment on issues"
    }
  ],
  "aiAgentTools": [
    {
      "category": "GitHub Read",
      "pattern": "github-get_*",
      "tools": [
        "github-get_issue_details",
        "github-get_repository_labels",
        "github-get_discussion_details",
        "github-get_discussion",
        "github-get_milestones"
      ]
    },
    {
      "category": "GitHub Write",
      "pattern": "github-add_* / github-create_* / github-close_* / github-assign_* / github-set_* / github-open_*",
      "tools": [
        "github-add_labels",
        "github-add_comment",
        "github-add_discussion_response",
        "github-create_issue",
        "github-create_pull_request",
        "github-close_issue",
        "github-assign_issue",
        "github-set_issue_milestone",
        "github-open_pull_request"
      ]
    },
    {
      "category": "Git Operations",
      "pattern": "git-*",
      "tools": [
        "git-status",
        "git-diff",
        "git-log",
        "git-create_branch"
      ]
    },
    {
      "category": "Repository File Operations",
      "pattern": "repository-*",
      "tools": [
        "repository-read_file",
        "repository-list_files",
        "repository-search_code"
      ]
    }
  ],
  "dependencies": {
    "runtime": {
      "typescript": "^5.3.3",
      "ts-node": "^10.9.2"
    },
    "github": {
      "@octokit/rest": "^20.0.2"
    },
    "ai": {
      "@anthropic-ai/sdk": "^0.32.0",
      "@anthropic-ai/vertex-sdk": "^0.4.0"
    },
    "data": {
      "better-sqlite3": "^11.0.0",
      "js-yaml": "^4.1.0",
      "ajv": "^8.17.1",
      "ajv-formats": "^3.0.1"
    },
    "logging": {
      "pino": "^10.3.0",
      "pino-pretty": "^13.1.3"
    },
    "templates": {
      "handlebars": "^4.7.8"
    },
    "terminal": {
      "node-pty": "^1.0.0"
    },
    "codeQuality": {
      "@biomejs/biome": "^2.3.14"
    }
  },
  "configuration": {
    "mainFile": "config.yaml",
    "exampleFile": "config.example.yaml",
    "sections": [
      "github",
      "repositories",
      "eventMappings",
      "actions",
      "queue",
      "workDirectory",
      "logging",
      "vertexAI",
      "prompts",
      "state"
    ],
    "environmentVariables": {
      "required": [
        "GITHUB_TOKEN"
      ],
      "optional": [
        "ANTHROPIC_VERTEX_PROJECT_ID"
      ]
    }
  },
  "documentation": [
    {
      "file": "README.md",
      "description": "Comprehensive setup and usage guide"
    },
    {
      "file": "docs/Actions.md",
      "description": "Action types and configuration (shell, JavaScript, AI agent)"
    },
    {
      "file": "docs/EventMappings.md",
      "description": "Event mapping configuration guide"
    },
    {
      "file": "docs/event-validation.md",
      "description": "Event validation system documentation"
    },
    {
      "file": "prompts/README.md",
      "description": "AI agent prompt system documentation"
    },
    {
      "file": "CODE_OF_CONDUCT.md",
      "description": "Community guidelines"
    },
    {
      "file": "CONTRIBUTING.md",
      "description": "Contribution guidelines"
    }
  ],
  "scripts": {
    "reset": "rm -rf dist data node_modules",
    "clean": "rm -rf dist",
    "build": "tsc",
    "dev": "node --loader ts-node/esm --watch src/index.ts",
    "lint": "biome check .",
    "lint:fix": "biome check --write ."
  },
  "actionTypes": [
    {
      "type": "shell",
      "description": "Execute bash commands or scripts",
      "features": [
        "PTY support",
        "Environment variables",
        "Work directory isolation",
        "Streaming output"
      ]
    },
    {
      "type": "javascript",
      "description": "Execute Node.js code",
      "features": [
        "Full Node.js API access",
        "Event object parameter",
        "Async/await support",
        "Console capture"
      ]
    },
    {
      "type": "ai-agent",
      "description": "Claude AI-powered actions via Vertex AI",
      "features": [
        "Custom tool system",
        "Task-specific prompts",
        "Safety limits",
        "Dry-run mode",
        "Comprehensive logging"
      ]
    }
  ],
  "eventFlow": [
    "GitHub Events",
    "GitHubPoller (polls every N seconds)",
    "EventProcessor (matches events â†’ actions)",
    "JobQueue (persistent, FIFO, concurrent)",
    "ActionExecutor (executes shell/JS/AI agent)",
    "Logs (action logs + event JSON)"
  ],
  "supportedEvents": [
    "issue.*",
    "pull_request.*",
    "issue_comment.*",
    "pull_request_review.*",
    "pull_request_review_comment.*",
    "discussion.*",
    "push",
    "release.*"
  ],
  "requirements": {
    "node": ">=18.0.0",
    "other": [
      "GitHub Personal Access Token",
      "SSH key configured for GitHub",
      "Google Cloud project with Vertex AI (for AI agents)",
      "Forked repositories (all monitored repos must be forked)"
    ]
  },
  "quickStart": {
    "install": "npm install",
    "configure": "cp config.example.yaml config.yaml && export GITHUB_TOKEN=xxx",
    "run": "./start.sh",
    "dev": "npm run dev",
    "dryRun": "npm start -- --dryRun",
    "listTools": "npm start -- --listTools"
  }
}
