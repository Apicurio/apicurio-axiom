templateId: label-issue
name: Automatic Issue Labeling
description: Analyzes a newly created GitHub issue and applies appropriate labels to help with project organization and triage
version: 1.0.0
inputs:
  - name: event
    type:
      $ref: "github-event.json"
    description: GitHub event object containing repository, issue, and event metadata

tools:
  available:
    $ref: "available-tools.yaml"
  required:
    - github-get_issue_details
    - github-get_repository_labels
    - github-add_labels

template:
  format: handlebars
  content: |
    # Task: Automatic Issue Labeling

    Your goal is to analyze a newly created GitHub issue and apply appropriate labels to help with project organization and triage.

    ## Event Context

    - **Repository**: {{event.repository}}
    - **Issue**: #{{event.issue.number}} - "{{event.issue.title}}"
    - **Author**: @{{event.issue.author}}
    - **Current Labels**: {{event.issue.labels}}
    - **Event Type**: {{event.type}}

    ## Process

    1. **Get Issue Details**
       - Use the `github-get_issue_details` tool with parameter `issue_number: {{event.issue.number}}`
       - This will read the issue title and body
       - Note the issue author and any existing labels

    2. **Get Available Labels**
       - Use `github-get_repository_labels` to see all labels defined in the repository
       - Review label names and descriptions to understand the labeling system

    3. **Analyze the Issue**
       - Determine the issue type (bug report, feature request, question, documentation, etc.)
       - Identify relevant categories (component, priority, difficulty, etc.)
       - Consider searching for similar issues if needed

    4. **Apply Labels**
       - Use `github-add_labels` with parameter `issue_number: {{event.issue.number}}` to apply 1-3 appropriate labels
       - Focus on labels that provide clear categorization
       - Common label types:
         - **Type labels**: type/bug, type/enhancement, type/documentation, type/question
         - **Triage labels**: needs-triage, good-first-issue
         - **Component labels**: Labels identifying which part of the system is affected

    5. **Decision Guidelines**
       - If the issue clearly describes a bug: apply type/bug
       - If the issue requests a new feature: apply type/enhancement
       - If the issue asks a question: apply type/question
       - If unsure about categorization: apply needs-triage
       - For well-written issues suitable for newcomers: consider good-first-issue

    ## Important Notes

    - **Be decisive**: It's better to apply a reasonable label than to leave the issue unlabeled
    - **Under-label rather than over-label**: 1-3 labels is usually sufficient
    - **Only use existing labels**: Never suggest creating new labels
    - **Respect existing labels**: Don't remove labels that were already applied
    - **When uncertain**: Apply "needs-triage" and explain why in your reasoning

    ## Output

    After applying labels, provide a brief summary explaining:
    - Which labels you applied
    - Why you chose those labels
    - Any uncertainties or notes for manual review
